# VK User Info Fetcher
Этот проект представляет собой инструмент для сбора информации о пользователях социальной сети ВКонтакте (VK) с использованием VK API и базы данных Neo4j для хранения и анализа данных. Он позволяет собирать данные о пользователях, их подписчиках, подписках, а также выполнять аналитические запросы по этим данным.

## Описание
Основной функционал включает:
- Получение информации о пользователе и его связях (подписчики и подписки) с помощью VK API.
- Сохранение собранной информации в графовую базу данных Neo4j.
- Выполнение аналитических запросов на графе, включая:
  - Общее количество пользователей и групп.
  - Топ-5 пользователей по количеству фолловеров.
  - Топ-5 самых популярных групп по количеству подписчиков.
  - Список пользователей, которые являются взаимными фолловерами.


## Требования

Для работы проекта необходимы следующие компоненты и библиотеки:

- **Python 3.12**
- **Docker** и **Docker Compose** для развертывания Neo4j и приложения.
- **VK API Access Token**: Необходим для доступа к VK API (получается на [странице VK для разработчиков](https://vk.com/dev/access_token)).
  
## Установка и запуск

#### Скопируйте 'template.env' и переименуйте в '.env', добавьте свои данные

#### Запуск контейнера:
```
docker-compose up -d
```

## Создание дампа

1. **Создайте папку dump**: 
Убедитесь, что папка dump существует в корневой директории вашего проекта:
```
mkdir -p dump
```

2. **Остановите контейнер Neo4j**:
Остановите контейнер, чтобы полностью остановить сервер Neo4j:
```
docker stop vk-user-info-fetcher_neo4j_1
```

3. **Создайте дамп базы данных**: 
Запустите контейнер с командой neo4j-admin dump, чтобы создать дамп базы данных:
```
docker run --rm \
  -v vk-user-info-fetcher_neo4j_data:/data \
  neo4j:4.3 \
  neo4j-admin dump --database=neo4j --to=/data/neo4j.dump
```

4. **Запустите контейнер Neo4j**:
После создания дампа снова запустите контейнер Neo4j:
```
docker start vk-user-info-fetcher_neo4j_1
```

5. **Скопируйте дамп на локальную машину**: 
После перезапуска контейнера, выполните команду для копирования дампа на локальный компьютер:
```
docker cp vk-user-info-fetcher_neo4j_1:/data/neo4j.dump ./dump/neo4j.dump
```

6. **(Опционально) Удалите дамп из контейнера**: 
Если дамп больше не нужен внутри контейнера, удалите его:
```
docker exec -t vk-user-info-fetcher_neo4j_1 rm /data/neo4j.dump
```

## Makefile
В проекте используется Makefile для удобного управления командами.

### Команды
Запускает контейнеры Docker с проектом.
```
make up
```

Останавливает и удаляет контейнеры Docker.
```
make down
```

Создает дамп базы данных и сохраняет его в папку dump под именем neo4j.dump
```
make dump
```

Удаляет старый дамп из папки dump.
```
make clean-dump
```